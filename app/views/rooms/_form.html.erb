<div class="space-maker listing-form">
  <div class="row" style="padding-top:50px">
    <div class="col-md-4 select">
      <div class="form-group">
	<label>Type<span class="asterisk">*</span></label>
	<%= f.select :home_type, [["Apartment", "Apartment"], ["House", "House"], ["GuestHouse", "GuestHouse"]],  { prompt: "Select.."}, { id: "home_type", class: "form-control validate[required]" } %>
      </div>
    </div>
    <div class="col-md-4 select">
      <div class="form-group">
	<label>Separate or shared</label>
	<%= f.select :room_type, [["Separate","separate"], ["Shared","shared"]], { prompt: "Select..." }, { class: "form-control" } %>
      </div>
    </div>
    <div class="col-md-4 select">
      <div class="form-group">
	<label>City</label>
	<%= f.select :city, [["Lahore","lahore"], ["North","north"]], { prompt: "Select..." }, { class: "form-control" } %>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-4">
      <div class="form-group">
	<label>No. of Guests Allowed</label>
	<%= f.number_field :accommodate, { min: 0, placeholder: "No. of guests", class: "form-control" } %>
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
	<label>Bedrooms<span class="asterisk">*</span></label>
	<%= f.number_field :bed_room, { min: 0, placeholder: "No. of bedrooms", class: "form-control validate[required]" } %>
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
	<label>Bathrooms<span class="asterisk">*</span></label>
	<%= f.number_field :bath_room, { min: 0, placeholder: "No. of bathrooms", class: "form-control validate[required]" } %>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-8">
      <label>Write a title for your listing</label>
      <%= f.text_field :listing_name, class: "form-control", placeholder: "Write a interesting listing name here" %> 
    </div>
    <div class="col-md-4 row-space-form">
      <div class="panel panel-default mt15">
	<div class="panel-body">
	  <p>Write an interesting title which best describes your place.</p>
	</div>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <div class="form-group">
	<label class="label-with-span">
	  Location<span class="asterisk">*</span> 
	</label>
	<%= f.select :location, options_for_select(Place.all.collect{ |p| [p.name, p.id] }, f.object.location), {:prompt => 'Destination, City, Province/State, Country'}, { class: "form-control location-select validate[required]" } %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <div class="form-group">
	<label>Complete Address</label>
	<%= f.text_area :postal_address, rows: 5, placeholder: "Travelers will use this information to find a place thatâ€™s in the right spot.", class: "form-control" %>
      </div>
    </div>
    <div class="col-md-4">
      <div class="panel panel-default mt30">
	<p style="padding-left:5px;padding-top:5px">The complete address will only be shared after Mezbaan confirms booking.</p>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div id="map">
      </div>
      <style>
	#map {
	width: 100%;
	height: 400px;
	} 
      </style>
    </div>
    <div class="col-md-4">
      <div class="panel panel-default">
	<p style="padding-left:5px;padding-top:5px">The exact location will only be shared after Mezbaan confirms booking.</p>
      </div>
    </div>
  </div>    
  <div class="row">
    <div style="padding-left:15px;padding-top:10px">
      <b><h4>Which Facilities are available?</h4></b>
    </div>
    <div class="row col-space-fac">
      <div class="col-md-2">
	<div class="form-group">
	  <%= f.check_box :is_air %> AC
	</div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_internet %> Internet
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
	  <%= f.check_box :is_generator %> Generator
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_ups %> UPS
        </div>
      </div>
    </div>
    <div class="row col-space-fac">
      <div class="col-md-2">
        <div class="form-group">
	  <%= f.check_box :is_fridge %> Refrigerator
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_heating %> Heating
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_tv %> TV
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_microwave %> Microwave
        </div>
      </div>
    </div>
    <div class="row col-space-fac">
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_kitchen %> Kitchen
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_studytable %> Study Table
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_iron %> Iron
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <%= f.check_box :is_food %> Food
        </div>
      </div>
    </div>
    <div class="row col-space-fac">
      <div class="col-md-3">
  	<label>Is there a Separate Entrance? </label>
  	<%= f.select :is_sepentrance, [["Yes", 1], ["No", 0]], {}, { class: "form-control validate[required]" } %>
      </div>
      <div class="col-md-3">
  	<label>Parking Available? </label>
  	<%= f.select :is_parking, [["Yes", 1], ["No", 0]], {}, { class: "form-control validate[required]" } %>
      </div>
    </div>
  </div>
  
  <div class="row row-space-form">
    <div class="col-md-12">
      <div class="form-group">
  	<label>Short Description of the Place</label>
  	<%= f.text_area :summary, rows: 5, placeholder: "Tell travelers what you love about the space. You can include details about the decor, the amenities it includes, and the neighborhood.", class: "form-control" %>
      </div>
    </div>
  </div>
  
  <h4>House Rules for Guests</h4>
  <%= f.fields_for :default_rule_rooms do |default_rule| %>
    <%= default_rule.hidden_field :default_rule_id, :value => default_rule.object.default_rule.id %>
    <div class="controls">
  	  <div class="row">
  	    <div class="col-sm-12">
  	      <div class="form-group">
        		<div class="col-sm-8 col-md-3 row small-font">
        		  <%= default_rule.label default_rule.object.default_rule.title %>
        		</div>
        		<div class="col-sm-4 col-md-2">
        		  <div class="switch-wrapper">
  	      	    <%= default_rule.check_box :answer %>
  	      	  </div>
        		</div>
  	      </div>
  	    </div>
  	  </div>
  	</div>
  <% end %>
      
  <div id="house_rules">
  	<%= f.fields_for :house_rules, :wrapper => true do |house_rules| %>
  	  <div class="row">
  	    <div class="col-sm-12">
  	      <div class="form-group">
        		<div class="col-sm-12 col-md-5 row">
        		  <%= house_rules.text_field :title, :placeholder => "Quite Hours? No shoes in the house?", :class => "label-like-input title-input" %>
        		</div>
        		<div class="col-sm-12 col-md-2">
        		  <%= house_rules.link_to_remove do %>
        		    <i class="fa fa-times line-height2_5"></i>
        		  <% end %>
        		</div>
  	      </div>
  	    </div>
  	  </div>
  	<% end %>
  </div>

  <div class="mb10 col-sm-12 row">
  	<div class="col-sm-4 row">
  	  <label>Enter any additional rules here:</label>
  	</div>
  	<div class="col-sm-8 row">
  	  <%= f.link_to_add :house_rules, :data => { :target => "#house_rules" }, :class => "mb10 hidden", :id => "add_house_rule" do %>
  	    <span>
  	      <i class = "fa fa-Plus"></i>Add New House Rule
  	    </span>
  	  <% end %>
  	</div>
  </div>
      
  <div class="row form-group">
  	<div class="col-sm-12">
  	  <div class="form-group">
  	    <div class="col-sm-12 col-md-5 row">
  	      <div class="input-group">
  		      <%= text_field_tag :'shared-rule-title', nil, :placeholder => "Quite Hours? No shoes in the house?", :class => "form-control" %>
        		<span class="input-group-btn">
        		  <button class="btn btn-secondary" id="add-rule-btn" type="button">Add</button>
        		</span>
  	      </div>
  	    </div>
  	  </div>
  	</div>
  </div>
	
	<div class="row row-space-form">
	  <div class="col-space-fac">
	    <b><h4>Pricing<span class="asterisk">*</span></h4></b>
	  </div>
	  <div class="col-md-4">
	    <div class="form-group">
	      <%= f.check_box :nightly_enabled, :checked => true, :class => "#{assign_class_to_price_enable_checkboxes}" %>
	      <label class="inline-label">Daily Price</span></label>
	      <div class="input-group">
		<div class="input-group-addon">Rs.</div>
		<%= f.text_field :price, placeholder: "eg. Rs.1000", class: "price-field form-control validate[required,funcCall[onlyNumber]]" %>
	      </div>
	    </div>
	  </div>
	  <div class="col-md-4">
	    <div class="form-group">
	      <%= f.check_box :weekly_enabled, :class => "#{assign_class_to_price_enable_checkboxes}" %>
	      <label class="inline-label">Weekly Price<span class="asterisk">*</span></label>
	      <div class="input-group">
		<div class="input-group-addon">Rs.</div>
		<%= f.text_field :weekly_price, disabled: true, placeholder: "eg. Rs.3000", class: "price-field form-control validate[required,funcCall[onlyNumber]]" %>
	      </div>
	    </div>
	  </div>
	  <div class="col-md-4">
	    <div class="form-group">
	      <%= f.check_box :monthly_enabled, :class => "#{assign_class_to_price_enable_checkboxes}" %>
	      <label class="inline-label">Monthly Price<span class="asterisk">*</span></label>
	      <div class="input-group">
		<div class="input-group-addon">Rs.</div>
		<%= f.text_field :monthly_price, disabled: true, placeholder: "eg. Rs.20000", class: "price-field form-control validate[required,funcCall[onlyNumber]]" %>
	      </div>
	    </div>
	  </div>
	</div>

	<div id="pictures">
	  <%= f.fields_for :photos, [], :wrapper => true do |room_form| %>
	    <div class="row">
	      <div class="col-sm-5">
		<p class="filename-para"></p>
		<span class="btn btn-default btn-file hidden">
		  <%= room_form.file_field :image, { :class => "pic-upload-field" } %>
		</span>
	      </div>
	      <div class="col-sm-7">
		<%= room_form.link_to_remove do %>
          	  <i class="fa fa-times"></i>
		<% end %>
	      </div>
	    </div>
	  <% end %>
	</div>
      
	<%= f.link_to_add :photos, :data => { :target => "#pictures" }, :class => "add-photo-btn" do %>
	<div class="row mb20">
	  <div class="col-sm-4">
	    <span class="btn btn-default btn-file">
	      <i class = "fa fa-cloud-upload fa-lg"></i>Upload Picture
	    </span>
	  </div>
	  </div>
	<% end %>
	
	<div class="row hidden">
	  <div class="col-md-4">
	    <div class="form-group">
	      <span class="btn btn-default btn-file">
		<i class = "fa fa-cloud-upload fa-lg"></i>Upload Photos
		<%= file_field_tag "images[]", type: :file, multiple: true %>
		<%= f.text_field :latitude, :class => "hidden latitude_field" %>
		<%= f.text_field :longitude, :class => "hidden longitude_field" %>
	      </span>
	    </div>
	  </div>
	</div>
	
	<div id="photos">
	  <%= render 'photos/list' %>
	</div>
	
	<div class="row hidden">
	  <div class="col-md-4">
	    <div class="form-group">
	      <%= f.check_box :active %> Active
	      <span class="fa fa-question-circle popover-dismiss" tabindex="0" data-toggle="popover" data-html="true" data-trigger="focus" data-placement="bottom" data-content="
            You can check this if you want to display this immediately in our search results, if you un-select this checkbox your listing will not appear in our search results."></span>
	    </div>
	  </div>
	</div>
      
      <!-- Google maps -->
</div>

<script>
  var map_marker;
  var map;
  function initialize() {
    var mapCanvas = document.getElementById('map');
    <% place = @place.present? ? @place : Place.first %>
    <% if @room.new_record? %>
      <% latitude = place.latitude %>
      <% longitude = place.longitude %>
    <% else %>
     <% latitude = @room.latitude %>
     <% longitude = @room.longitude %>
    <% end %>
    var mapOptions = {
      center: new google.maps.LatLng(<%= latitude %>, <%= longitude %>),
      zoom: <%= get_map_zoom_level place %>,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      scrollwheel: false
    }

    map = new google.maps.Map(mapCanvas, mapOptions);
    map_marker = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(<%= latitude %>, <%= longitude %>),
      title: "qayaam",
      draggable:true
    });
    // Add circle overlay and bind to marker
    // var circle = new google.maps.Circle({
    //   map: map,
    //   radius: <%= (place.radius / 2) * 1609.34 %>,    // 10 miles in metres
    //   fillColor: '#AA0000'
    // });
    // circle.bindTo('center', marker, 'position');
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpk8v_K0Scb10sblIgxphDNA8pjNSPLpk&v=3.exp&sensor=false&callback=initialize"></script>


 

